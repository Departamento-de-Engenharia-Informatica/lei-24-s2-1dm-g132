@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox

participant ":GenerateTeamController" as CTRL
participant ":Repositories" as RepositorySingleton
participant "repositories\n:Repositories" as PLAT
participant "collaboratorRepository:\nCollaboratorRepository" as CollaboratorRepository
participant "teamRepository:\nTeamRepository" as TeamRepository
participant "team\n:Team" as Team

autonumber 14

    -> CTRL : checkAvailableCollaborators()
            autonumber 14.1
            group Get Available Collaborators

            activate CTRL


            CTRL -> RepositorySingleton : getInstance()
                activate RepositorySingleton

                    RepositorySingleton --> CTRL: repositories
                deactivate RepositorySingleton

                CTRL -> PLAT : getCollaboratorRepository()
                activate PLAT

                     PLAT --> CTRL: collaboratorRepository
            deactivate PLAT

            CTRL -> CollaboratorRepository : getCollaborators()
                activate CollaboratorRepository

                    CollaboratorRepository --> CTRL : collaboratorList
                deactivate CollaboratorRepository

                CTRL -> PLAT : getTeamRepository()
                activate PLAT

                    PLAT --> CTRL : teamRepository
                deactivate PLAT

            CTRL -> TeamRepository : checkAvailableCollaborators(collaboratorList)
                activate TeamRepository

                    loop for each team

                    TeamRepository -> Team: removeUnavailableCollaborators(collaboratorList)
                    activate Team

                        Team --> TeamRepository : collaboratorList
                    deactivate Team

                    end loop

                    TeamRepository --> CTRL : availableCollaborators
                deactivate TeamRepository

                end group
                autonumber 15

            <-- CTRL : availableCollaborators
@enduml