


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > AsymptoticBehaviorAnalyser</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">pt.ipp.isep.dei.esoft.project.domain</a>
</div>

<h1>Coverage Summary for Class: AsymptoticBehaviorAnalyser (pt.ipp.isep.dei.esoft.project.domain)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">AsymptoticBehaviorAnalyser</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/42)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/108)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package pt.ipp.isep.dei.esoft.project.domain;
&nbsp;
&nbsp;import pt.ipp.isep.dei.esoft.project.domain.graph.Algorithms;
&nbsp;import pt.ipp.isep.dei.esoft.project.repository.WaterSuplyPointsCsvRepository;
&nbsp;
&nbsp;import java.io.*;
&nbsp;import java.util.*;
&nbsp;
&nbsp;public class AsymptoticBehaviorAnalyser {
&nbsp;    public String desktopPath;
&nbsp;    private final String folderPath;
<b class="nc">&nbsp;    private final String folderName = &quot;output&quot;;</b>
&nbsp;
<b class="nc">&nbsp;    public AsymptoticBehaviorAnalyser() {</b>
<b class="nc">&nbsp;        getDesktopPath();</b>
<b class="nc">&nbsp;        this.folderPath = desktopPath + File.separator + folderName;</b>
&nbsp;    }
&nbsp;
&nbsp;    private void getDesktopPath() {
&nbsp;        try {
<b class="nc">&nbsp;            this.desktopPath = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Desktop&quot;;</b>
<b class="nc">&nbsp;        } catch (Exception e) {</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public Map&lt;String, Long&gt; startTest(List&lt;Integer&gt; listOfSizes, int iterations) throws IOException {
<b class="nc">&nbsp;        Map&lt;String, Long&gt; finalMap = new HashMap&lt;&gt;();</b>
&nbsp;        Map&lt;String, Long&gt; iterationMap;
<b class="nc">&nbsp;        for (int i = 0; i &lt; iterations; i++) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Iteration: &quot; + (i + 1));</b>
<b class="nc">&nbsp;            System.out.println(&quot;Generating test CSV&#39;s...&quot;);</b>
<b class="nc">&nbsp;            if (!generateCsvs(listOfSizes)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;Analyzing...&quot;);</b>
<b class="nc">&nbsp;                iterationMap = readCsvs();</b>
&nbsp;            }
<b class="nc">&nbsp;            for (Map.Entry&lt;String, Long&gt; a : iterationMap.entrySet()) {</b>
<b class="nc">&nbsp;                if (!finalMap.containsKey(a.getKey())){</b>
<b class="nc">&nbsp;                    finalMap.put(a.getKey(), a.getValue());</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    finalMap.replace(a.getKey(), finalMap.get(a.getKey()) + a.getValue());</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        for (Map.Entry&lt;String, Long&gt; a : finalMap.entrySet()){</b>
<b class="nc">&nbsp;            finalMap.replace(a.getKey(), a.getValue()/5);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return finalMap;</b>
&nbsp;    }
&nbsp;
&nbsp;    private Map&lt;String, Long&gt; readCsvs() {
<b class="nc">&nbsp;        File folder = new File(folderPath);</b>
<b class="nc">&nbsp;        if (!folder.isDirectory()) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(&quot;Inválid path to the folder&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Map&lt;String, Long&gt; mapToReturn = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;        File[] files = folder.listFiles();</b>
<b class="nc">&nbsp;        String fileName = &quot;&quot;;</b>
&nbsp;        try {
<b class="nc">&nbsp;            for (File file : files) {</b>
<b class="nc">&nbsp;                fileName = file.getName();</b>
<b class="nc">&nbsp;                WaterSuplyPointsCsvRepository tempRepo = new WaterSuplyPointsCsvRepository(true);</b>
<b class="nc">&nbsp;                if (tempRepo.loadGraph(file.getAbsolutePath())){</b>
<b class="nc">&nbsp;                    long begining = System.currentTimeMillis();</b>
<b class="nc">&nbsp;                    Algorithms.minDistGraph(tempRepo.getCsvGraphCopy(), Comparator.naturalOrder());</b>
<b class="nc">&nbsp;                    long end = System.currentTimeMillis();</b>
<b class="nc">&nbsp;                    mapToReturn.put(file.getName(), (end - begining));</b>
&nbsp;                } else {
&nbsp;
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }catch (IllegalArgumentException illegalArgumentException){</b>
<b class="nc">&nbsp;            System.out.println(illegalArgumentException.getMessage() + &quot;. &quot; + fileName);</b>
&nbsp;        }
<b class="nc">&nbsp;        catch (OutOfMemoryError outOfMemoryError) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Out of memory! File: &quot; + fileName);</b>
<b class="nc">&nbsp;        } catch (Exception e) {</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
&nbsp;        }
<b class="nc">&nbsp;        return mapToReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    private String getRandomIntInString() {
<b class="nc">&nbsp;        Random rand = new Random();</b>
&nbsp;        // inteiro random entre 1 e 100000
<b class="nc">&nbsp;        return String.valueOf((rand.nextInt((100000 - 1) + 1) + 1));</b>
&nbsp;    }
&nbsp;
&nbsp;    private boolean generateCsvs(List&lt;Integer&gt; listOfSizes) throws IOException {
<b class="nc">&nbsp;        File folder = new File(desktopPath, folderName);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            if (!folder.exists()) { // Check if the folder doesn&#39;t already exist</b>
<b class="nc">&nbsp;                boolean created = folder.mkdir(); // Create the folder</b>
<b class="nc">&nbsp;                if (!created) {</b>
<b class="nc">&nbsp;                    throw new RuntimeException(&quot;Failed to create the folder: &quot; + folderName);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        } catch (Exception exception) {</b>
<b class="nc">&nbsp;            exception.printStackTrace();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        boolean status = false;</b>
<b class="nc">&nbsp;        for (Integer inputSize : listOfSizes) {</b>
<b class="nc">&nbsp;            String csvFile = folderPath + File.separator + inputSize.toString() + &quot;inputSizeCSV.csv&quot;;</b>
<b class="nc">&nbsp;            File file = new File(csvFile);</b>
&nbsp;            // Check if the file exists
<b class="nc">&nbsp;            if (file.exists()) {</b>
&nbsp;                // Attempt to delete the file
<b class="nc">&nbsp;                if (!file.delete()) {</b>
<b class="nc">&nbsp;                    String message = file.exists() ? &quot;is in use by another app&quot; : &quot;does not exist&quot;;</b>
<b class="nc">&nbsp;                    throw new IOException(&quot;Cannot delete file &quot;+ file.getName() +&quot; , because file &quot; + message + &quot;.&quot;);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            String header = &quot;Water Point X, Water Point Y, Distance\n&quot;;</b>
<b class="nc">&nbsp;            try (FileWriter writer = new FileWriter(csvFile, true)) {</b>
<b class="nc">&nbsp;                writer.write(header);</b>
<b class="nc">&nbsp;                for (int i = 0; i &lt; inputSize; i++) {</b>
<b class="nc">&nbsp;                    String line = getRandomIntInString() + &quot;, &quot; + getRandomIntInString() + &quot;, &quot; + getRandomIntInString() + &quot;\n&quot;;</b>
<b class="nc">&nbsp;                    writer.write(line);</b>
&nbsp;                }
<b class="nc">&nbsp;                status = true;</b>
<b class="nc">&nbsp;            } catch (Exception exception) {</b>
<b class="nc">&nbsp;                exception.printStackTrace();</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return status;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean generateGraph(List&lt;Map.Entry&lt;String, Long&gt;&gt; entryList) {
<b class="nc">&nbsp;        System.out.println(&quot;Generating Graph...&quot;);</b>
&nbsp;        try {
<b class="nc">&nbsp;            File tempFile = File.createTempFile(&quot;gnuplot-data&quot;, &quot;txt&quot;);</b>
&nbsp;
<b class="nc">&nbsp;            try (PrintWriter writer = new PrintWriter(new FileWriter(tempFile))){</b>
<b class="nc">&nbsp;                for (Map.Entry&lt;String, Long&gt; entry : entryList){</b>
<b class="nc">&nbsp;                    writer.println(entry.getKey() + &quot; &quot; + entry.getValue());</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            ProcessBuilder processBuilder = new ProcessBuilder(&quot;gnuplot&quot;);</b>
<b class="nc">&nbsp;            processBuilder.redirectErrorStream(true);</b>
<b class="nc">&nbsp;            Process process = processBuilder.start();</b>
&nbsp;
<b class="nc">&nbsp;            try (PrintWriter writer = new PrintWriter(new OutputStreamWriter(process.getOutputStream()))){</b>
<b class="nc">&nbsp;                writer.println(&quot;set terminal pngcairo&quot;);</b>
<b class="nc">&nbsp;                writer.println(&quot;set output &#39;&quot;+folderPath + File.separator + &quot;graph.png&#39;&quot;);</b>
<b class="nc">&nbsp;                writer.println(&quot;set title &#39;Execution Time vs Input Size&#39;&quot;);</b>
<b class="nc">&nbsp;                writer.println(&quot;set xlabel &#39;Input Size (edges)&#39;&quot;);</b>
<b class="nc">&nbsp;                writer.println(&quot;set ylabel &#39;Execution Time (ms)&#39;&quot;);</b>
<b class="nc">&nbsp;                writer.println(&quot;plot &#39;&quot; + tempFile.getAbsolutePath() + &quot;&#39; using 1:2 with lines title &#39;Data&#39;&quot;);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {</b>
&nbsp;                String line;
<b class="nc">&nbsp;                while ((line = reader.readLine()) != null) {</b>
<b class="nc">&nbsp;                    System.out.println(line);</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            process.waitFor();</b>
&nbsp;
&nbsp;            try {
&nbsp;                String command;
&nbsp;
&nbsp;                // Check the operating system
<b class="nc">&nbsp;                String os = System.getProperty(&quot;os.name&quot;).toLowerCase();</b>
&nbsp;
<b class="nc">&nbsp;                if (os.contains(&quot;win&quot;)) {</b>
&nbsp;                    // Windows
<b class="nc">&nbsp;                    command = &quot;cmd.exe /c start &quot;;</b>
<b class="nc">&nbsp;                } else if (os.contains(&quot;nix&quot;) || os.contains(&quot;nux&quot;) || os.contains(&quot;mac&quot;)) {</b>
&nbsp;                    // Unix or Linux or Mac
<b class="nc">&nbsp;                    command = &quot;open &quot;;</b>
&nbsp;                } else {
&nbsp;                    // Unsupported OS
<b class="nc">&nbsp;                    System.out.println(&quot;Unsupported operating system.&quot;);</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;
&nbsp;                // Path to the image file
<b class="nc">&nbsp;                String imagePath = folderPath + File.separator + &quot;graph.png&quot;;;</b>
&nbsp;
&nbsp;                // Execute the command
<b class="nc">&nbsp;                Runtime runtime = Runtime.getRuntime();</b>
<b class="nc">&nbsp;                Process process2 = runtime.exec(command + imagePath);</b>
<b class="nc">&nbsp;                process2.waitFor();</b>
<b class="nc">&nbsp;            } catch (IOException | InterruptedException e) {</b>
<b class="nc">&nbsp;                e.printStackTrace();</b>
&nbsp;            }
&nbsp;
&nbsp;
<b class="nc">&nbsp;        }catch (Exception exception){</b>
<b class="nc">&nbsp;            exception.printStackTrace();</b>
&nbsp;        }
<b class="nc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-05-12 20:04</div>
</div>
</body>
</html>
